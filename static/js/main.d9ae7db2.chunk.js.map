{"version":3,"sources":["global/constants.js","pages/Home/components/Edit.js","pages/Home/components/Item.js","pages/Home/components/List.js","pages/Home/index.js","index.js"],"names":["API_GET_DATA","Edit","add","submittingStatus","useState","time","setTime","date","setDate","note","setNote","console","log","type","value","onChange","e","target","onClick","current","prevData","id","v4","className","Item","deleteData","prev","filter","item","List","listData","map","setData","a","fetch","res","json","data","method","headers","body","JSON","stringify","Home","useRef","useEffect","fetchSetData","then","fetchData","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d9ae7db2.chunk.js","sourcesContent":["export const API_HOST = \"https://lindsay0214.github.io/react-first/\";\nexport const API_GET_DATA = `${API_HOST}posts/1`;\n","// import List from './List'\nimport { useState } from \"react\";\nimport { v4 } from \"uuid\";\n\nconst Edit = ({ add, submittingStatus }) => {\n  const [time, setTime] = useState(\"\");\n  function timeChange(e) {\n    setTime(e.target.value);\n  }\n\n  const [date, setDate] = useState(\"\");\n  function dateChange(e) {\n    setDate(e.target.value);\n  }\n\n  const [note, setNote] = useState(\"\");\n  function noteChange(e) {\n    setNote(e.target.value);\n  }\n\n  console.log(note, date, time);\n\n  function addItem() {\n    submittingStatus.current = true;\n    add(function (prevData) {\n      return [\n        {\n          id: v4(), // 讓 key 有個獨立 id\n          note,\n          date,\n          time,\n        },\n        ...prevData, // 這個放後面，新增留言就會長在上面\n      ];\n    });\n  }\n\n  return (\n    <div>\n      <h1>備忘錄</h1>\n      <p>記事</p>\n      <input type=\"text\" value={note} onChange={noteChange} />\n      <p>日期</p>\n      <input type=\"date\" value={date} onChange={dateChange} />\n      <p>時間</p>\n      <input type=\"time\" value={time} onChange={timeChange} />\n      <button onClick={addItem} className=\"add\">\n        新增\n      </button>\n    </div>\n  );\n};\n\nexport default Edit;\n","const Item = ({ id, note, date, time, deleteData, submittingStatus }) => {\n  function deleteItem() {\n    submittingStatus.current = true;\n    deleteData(function (prev) {\n      return prev.filter((item) => item.id !== id);\n    });\n  }\n\n  return (\n    <div className=\"item\">\n      <div className=\"content\">\n        <p className=\"content__word\">{note}</p>\n        <p>{`${date} ${time}`}</p>\n        <button onClick={deleteItem} className=\"remove\">\n          刪除\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n","import Item from \"./Item\";\n\nconst List = ({ listData, deleteData, submittingStatus }) => {\n  return (\n    <div className=\"list\">\n      {listData.map((item) => {\n        const { note, date, time, id } = item;\n        return (\n          <Item\n            key={id}\n            id={id}\n            note={note}\n            date={date}\n            time={time}\n            deleteData={deleteData}\n            submittingStatus={submittingStatus}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default List;\n","import { useState, useEffect, useRef } from \"react\";\nimport { API_GET_DATA } from \"../../global/constants\";\n\nimport Edit from \"./components/Edit\";\nimport List from \"./components/List\";\nimport \"./index.css\";\n\nasync function fetchData(setData) {\n  const res = await fetch(API_GET_DATA);\n  const { data } = await res.json();\n  // console.log(data)\n  setData(data);\n}\n\nasync function fetchSetData(data) {\n  await fetch(API_GET_DATA, {\n    method: \"PUT\",\n    headers: {\n      \"Content-type\": \"application/json\",\n    },\n    body: JSON.stringify({ data }),\n  });\n}\n\nconst Home = () => {\n  const [data, setData] = useState([]);\n  const submittingStatus = useRef(false); // 維持最新狀態的一個值，但不會影響渲染\n\n  useEffect(() => {\n    if (!submittingStatus.current) {\n      return;\n    }\n    fetchSetData(data).then((data) => (submittingStatus.current = false));\n  }, [data]);\n\n  useEffect(() => {\n    fetchData(setData);\n    //   fetch(API_GET_DATA)\n    //   .then(res => res.json())\n    //   .then(data => {\n    //   console.log(data)  YA 拿到了\n    //   })\n  }, []);\n  //       // 綁定的事\n  //       return () => {\n  //       // 要取消綁定的事\n  //       }\n  //   }, [data])\n\n  return (\n    <div className=\"app\">\n      <Edit add={setData} submittingStatus={submittingStatus} />\n      <List\n        listData={data}\n        deleteData={setData}\n        submittingStatus={submittingStatus}\n      />\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Home from \"./pages/Home\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Home />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}